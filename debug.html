<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emoji Matching Game - Debug Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #2c3e50;
            color: white;
            font-family: Arial, sans-serif;
        }
        .debug-info {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
        }
        #game-container {
            width: 100%;
            height: 600px;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div class="debug-info">
        <h4>🎮 Emoji Pair Debug</h4>
        <div id="emoji-count"></div>
    </div>
    
    <div id="game-container"></div>
    
    <script type="module">
        import { Boot } from './src/scenes/Boot.js';
        import { Game } from './src/scenes/Game.js';
        import { MainMenu } from './src/scenes/MainMenu.js';
        import { Preloader } from './src/scenes/Preloader.js';

        //  Find out more information about the Game Config at:
        //  https://newdocs.phaser.io/docs/3.70.0/Phaser.Types.Core.GameConfig
        const config = {
            type: Phaser.AUTO,
            width: 800,
            height: 600,
            parent: 'game-container',
            backgroundColor: '#028af8',
            scene: [
                Boot,
                Preloader,
                MainMenu,
                Game
            ]
        };

        const game = new Phaser.Game(config);

        // Debug function to count emoji pairs
        window.debugEmojiPairs = function() {
            const gameScene = game.scene.getScene('Game');
            if (gameScene && gameScene.emojis) {
                const emojiCount = {};
                gameScene.emojis.children.entries.forEach(emoji => {
                    const type = emoji.emojiType;
                    emojiCount[type] = (emojiCount[type] || 0) + 1;
                });
                
                const debugDiv = document.getElementById('emoji-count');
                let html = '<strong>🎯 Find The Pair Game (NEW LOGIC):</strong><br><br>';
                
                let pairCount = 0;
                let singleCount = 0;
                let errorCount = 0;
                
                const sortedTypes = Object.keys(emojiCount).sort((a,b) => a-b);
                
                sortedTypes.forEach(type => {
                    const count = emojiCount[type];
                    let status = '';
                    let emoji = '';
                    
                    // Get emoji character for display
                    const emojis = ['😀', '😎', '🎮', '🎯', '⭐', '🎨', '🎪', '🎭', '🚀', '🌟', '🎉', '🎊', '🎈', '🎁', '🏆', '💎'];
                    if (type < emojis.length) {
                        emoji = emojis[type];
                    }
                    
                    if (count === 2) {
                        status = '✅ PAIR TO FIND!';
                        pairCount++;
                    } else if (count === 1) {
                        status = '✓ Single (correct)';
                        singleCount++;
                    } else {
                        status = `❌ ERROR: ${count} times!`;
                        errorCount++;
                    }
                    html += `${emoji} Type ${type}: ${count} ${status}<br>`;
                });
                
                html += `<br><strong>VERIFICATION:</strong><br>`;
                html += `✅ Pairs (should be 1): ${pairCount}<br>`;
                html += `✅ Singles (should be 14): ${singleCount}<br>`;
                html += `❌ Errors (should be 0): ${errorCount}<br>`;
                html += `📊 Total emojis: ${gameScene.emojis.children.size}/16<br>`;
                
                const isCorrect = (pairCount === 1 && singleCount === 14 && errorCount === 0);
                html += `<br><strong>RESULT: ${isCorrect ? '✅ PERFECT!' : '❌ NEEDS FIX'}</strong>`;
                
                debugDiv.innerHTML = html;
                
                console.log('🎯 Emoji distribution:', emojiCount);
                console.log(`🎯 Verification: ${pairCount} pairs, ${singleCount} singles, ${errorCount} errors`);
                return { emojiCount, pairCount, singleCount, errorCount, isCorrect };
            }
        };

        // Auto-run debug after game starts
        setTimeout(() => {
            if (window.debugEmojiPairs) {
                window.debugEmojiPairs();
            }
        }, 3000);
    </script>
</body>
</html>
